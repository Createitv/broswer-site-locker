# 网站锁定器 - Chrome 扩展程序

> 🔒 强大的 Chrome 扩展程序，可屏蔽指定网站，直到用户输入配置的密码才能访问。

[中文文档](./README.zh-CN.md) | [English](./README.md)

## 🌟 功能特性

- **🛡️ 网站屏蔽**: 通过密码保护屏蔽特定网站或域名
- **🔐 安全认证**: 使用 SHA-256 密码哈希确保安全性
- **⏰ 会话管理**: 可配置的会话超时和自动过期功能
- **🌍 多语言支持**: 完整的国际化支持（中英文）
- **🎯 智能屏蔽**: 屏蔽受限网站的所有子路径和子域名
- **⚡ 实时更新**: 语言切换立即在所有组件中生效
- **🔧 灵活配置**: 全面的配置选项
- **📱 现代界面**: 美观、响应式界面，带有流畅动画

## 🚀 快速开始

### 安装步骤

1. **克隆仓库**
   ```bash
   git clone <repository-url>
   cd site-locker
   ```

2. **安装依赖**
   ```bash
   pnpm install
   # 或者使用 npm install
   ```

3. **构建扩展**
   ```bash
   pnpm build
   # 或者使用 npm run build
   ```

4. **在 Chrome 中加载**
   - 打开 Chrome 并导航到 `chrome://extensions/`
   - 启用"开发者模式"（右上角切换开关）
   - 点击"加载已解压的扩展程序"
   - 选择 `build/chrome-mv3-prod` 文件夹

### 首次设置

1. **设置密码**: 点击扩展程序图标 → "管理设置" → 设置您的密码
2. **添加屏蔽网站**: 添加您要限制的网站（如：`facebook.com`、`youtube.com`）
3. **配置设置**: 调整会话超时和其他首选项

## 📖 工作原理

### 核心功能

1. **网站检测**: 监控所有标签页导航和 URL 变化
2. **域名匹配**: 检查访问的网站是否匹配屏蔽的域名
3. **锁定屏幕**: 为未授权访问显示密码提示
4. **会话授权**: 成功认证后授予临时访问权限
5. **自动过期**: 根据配置的超时设置使会话过期

### 安全功能

- **密码哈希**: 使用 SHA-256 和 Web Crypto API
- **会话隔离**: 每个域名需要单独授权
- **超时保护**: 自动会话过期防止无限制访问
- **重启安全**: 浏览器重启后可选择重新认证

## 🔧 配置选项

### 全局设置

| 设置项 | 描述 | 默认值 |
|-------|------|-------|
| 启用网站锁定 | 扩展程序的主开关 | `true` |
| 会话超时 | 需要重新认证前的分钟数 | `30` |
| 浏览器重启后需要密码 | 浏览器重启时清除会话 | `true` |

### 添加屏蔽网站

**支持的格式:**
- 域名: `example.com`
- 子域名: `subdomain.example.com` 
- 带协议: `https://example.com`
- 带路径: `https://example.com/path` (仍会屏蔽整个域名)

**屏蔽范围:**
- `example.com` → 屏蔽所有 `*.example.com/*`
- `notion.so` → 屏蔽 `notion.so/workspace/page` 等

## 🎨 用户界面

### 组件

1. **🗂️ 弹出窗口**: 快速状态查看和管理
2. **⚙️ 选项页面**: 完整的配置界面
3. **🔒 锁定屏幕**: 密码认证覆盖层
4. **🌐 语言选择器**: 中英文切换

### 锁定屏幕功能

- **居中设计**: 专业、不干扰的外观
- **实时翻译**: 无需刷新页面即可更新语言
- **错误处理**: 为认证失败提供清晰反馈
- **插件标识**: 底部角落的微妙品牌标识

## 🌍 多语言支持

### 支持的语言

- **🇺🇸 English** (默认)
- **🇨🇳 中文简体**

### 语言功能

- **自动检测**: 使用浏览器语言偏好
- **持久存储**: 记住用户语言选择
- **实时更新**: 更改立即应用于所有界面
- **回退支持**: 优雅降级到英语

### 切换语言

1. 打开扩展程序选项页面
2. 从"Language / 语言"部分选择首选语言
3. 更改立即应用于所有扩展程序组件

## 🛠️ 开发

### 技术栈

- **框架**: [Plasmo](https://plasmo.com/) - 现代浏览器扩展框架
- **前端**: React 18 + TypeScript
- **样式**: Tailwind CSS 带自定义动画
- **存储**: Chrome Storage API 带加密
- **构建**: 现代工具链带热重载

### 项目结构

```
src/
├── background.ts              # 服务工作者（URL 监控）
├── content.tsx               # 内容脚本（锁定屏幕注入）
├── popup.tsx                 # 扩展程序弹出界面
├── options.tsx               # 设置/配置页面
├── features/
│   ├── lock-screen.tsx       # 密码认证组件
│   └── count-button.tsx      # 演示组件
├── utils/
│   ├── storage.ts            # 数据持久化和加密
│   └── i18n.ts               # 国际化系统
└── style.css                # 全局样式
```

### 开发命令

```bash
# 带热重载的开发
pnpm dev

# 生产构建
pnpm build  

# 打包分发
pnpm package
```

### 使用的关键 API

- **Chrome Extensions API**: 标签页、存储、脚本、运行时
- **Web Crypto API**: SHA-256 密码哈希
- **Chrome Storage**: 持久配置和会话
- **Chrome Tabs**: 导航监控和内容注入

## 🔐 安全考虑

### 密码安全
- ✅ SHA-256 哈希（无明文存储）
- ✅ 安全的 Web Crypto API 实现
- ✅ 无网络传输密码
- ✅ 仅本地认证

### 会话安全
- ✅ 域名特定授权
- ✅ 可配置超时期间
- ✅ 可选重启清除
- ✅ 无跨域会话共享

### 数据隐私
- ✅ 所有数据本地存储
- ✅ 无外部网络请求
- ✅ 无用户跟踪或分析
- ✅ 开源且可审计

## ⚠️ 限制

- **仅限 Chrome**: 目前支持基于 Chrome/Chromium 的浏览器
- **本地存储**: 设置不在设备间同步
- **基于标签页**: 新的隐身窗口可能绕过限制
- **技术用户**: 可通过开发者工具禁用

## 🤝 贡献

我们欢迎贡献！请查看我们的贡献指南：

1. Fork 仓库
2. 创建功能分支 (`git checkout -b feature/amazing-feature`)
3. 提交更改 (`git commit -m 'Add amazing feature'`)
4. 推送到分支 (`git push origin feature/amazing-feature`)
5. 打开 Pull Request

### 开发设置

```bash
git clone <your-fork>
cd site-locker
pnpm install
pnpm dev
```

## 📄 许可证

本项目采用 **专有许可证** - 详情请参见 [LICENSE](LICENSE) 文件。

**⚠️ 重要**: 本软件为专有软件，严禁未经授权的使用、分发或修改。

## 🐛 错误报告与功能请求

发现错误或有功能想法？请[提交 issue](../../issues)：

- **错误报告**: 重现步骤、期望与实际行为
- **功能请求**: 用例描述和建议实现

## 🆘 支持

- **文档**: 查看此 README 和内联代码注释
- **Issues**: 在创建新 issue 前搜索现有的
- **讨论**: 使用 GitHub Discussions 提问

## 📊 更新日志

### 版本 0.0.1 (初始发布)
- ✨ 核心网站屏蔽功能
- 🔐 安全密码认证
- ⏰ 会话管理系统
- 🌍 多语言支持（中英文）
- 🎨 现代响应式界面
- 🛡️ 安全强化

---

**由 [lingxiaoyao](mailto:xfy150150@gmail.com) 用 ❤️ 制作**

⭐ **如果觉得有用请给仓库点星！**